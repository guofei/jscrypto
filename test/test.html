<html>
<body>

<center><h1>Plugin</h1></center>

<br><br>

<center>


<embed type="application/crypto" id="Crypto plugin" hidden="true">

<script>

plugin_call_test();
function plugin_call_test(){

  var plugin = document.getElementById("Crypto plugin");

  if(!plugin){
    alert("no plugin");
  }else{
    alert("succeeded load plugins");
  }
  var pub = plugin.load_public_key("/home/kaku/M2/jscrypto/test/public.pem");
  alert(pub);
  var pri = plugin.load_private_key("/home/kaku/M2/jscrypto/test/private.pem", "12345678");
  alert(pri);
  var ciphertext = plugin.encrypt(pub, "abc");
  alert(ciphertext);
  var text = plugin.decrypt(pri, ciphertext);
  alert(text);
  //plugin.test("helloword");
  var counter1 = plugin.counter_create(1);
  var ciphertext1 = plugin.counter_encrypt("password", "text1", counter1);
  var ciphertext2 = plugin.counter_encrypt("password", "text2", counter1);
  var counter2 = plugin.counter_create(1);
  var text1 = plugin.counter_decrypt("password", ciphertext1, counter2);
  alert(text1);
  var text2 = plugin.counter_decrypt("password", ciphertext2, counter2);
  alert(text2);
}

</script>
</center>

</html>
</body>


